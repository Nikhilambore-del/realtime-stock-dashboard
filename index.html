<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Real-Time Stock Market Analytics Dashboard - Data Engineering Showcase by Nikhil Ambore">
    <meta name="author" content="Nikhil Ambore">
    <title>Real-Time Stock Analytics | Nikhil Ambore</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, AreaChart, Area } = Recharts;
        const { TrendingUp, TrendingDown, Activity, DollarSign, AlertCircle, Play, Pause, BarChart3, Github, Linkedin, Mail } = lucideReact;

        const RealTimeStockDashboard = () => {
          const [isStreaming, setIsStreaming] = useState(false);
          const [stocks, setStocks] = useState({
            AAPL: { name: 'Apple Inc.', price: 178.50, change: 0, history: [] },
            GOOGL: { name: 'Alphabet Inc.', price: 142.30, change: 0, history: [] },
            MSFT: { name: 'Microsoft Corp.', price: 378.90, change: 0, history: [] },
            TSLA: { name: 'Tesla Inc.', price: 242.80, change: 0, history: [] },
            AMZN: { name: 'Amazon.com Inc.', price: 178.25, change: 0, history: [] }
          });
          const [alerts, setAlerts] = useState([]);
          const [metrics, setMetrics] = useState({
            totalVolume: 0,
            avgLatency: 0,
            processedEvents: 0,
            anomaliesDetected: 0
          });
          const [selectedStock, setSelectedStock] = useState('AAPL');
          const intervalRef = useRef(null);

          useEffect(() => {
            if (isStreaming) {
              intervalRef.current = setInterval(() => {
                setStocks(prevStocks => {
                  const newStocks = { ...prevStocks };
                  const timestamp = new Date().toLocaleTimeString();
                  
                  Object.keys(newStocks).forEach(symbol => {
                    const changePercent = (Math.random() - 0.5) * 0.04;
                    const priceChange = newStocks[symbol].price * changePercent;
                    const newPrice = newStocks[symbol].price + priceChange;
                    
                    newStocks[symbol] = {
                      ...newStocks[symbol],
                      price: parseFloat(newPrice.toFixed(2)),
                      change: parseFloat(priceChange.toFixed(2)),
                      history: [
                        ...newStocks[symbol].history.slice(-29),
                        { time: timestamp, price: parseFloat(newPrice.toFixed(2)) }
                      ]
                    };

                    if (Math.abs(changePercent) > 0.015) {
                      const alert = {
                        id: Date.now() + Math.random(),
                        symbol,
                        type: changePercent > 0 ? 'spike' : 'drop',
                        change: (changePercent * 100).toFixed(2),
                        time: timestamp
                      };
                      setAlerts(prev => [alert, ...prev.slice(0, 4)]);
                      setMetrics(prev => ({ ...prev, anomaliesDetected: prev.anomaliesDetected + 1 }));
                    }
                  });

                  return newStocks;
                });

                setMetrics(prev => ({
                  totalVolume: prev.totalVolume + Math.floor(Math.random() * 100000),
                  avgLatency: Math.floor(Math.random() * 50) + 10,
                  processedEvents: prev.processedEvents + 5,
                  anomaliesDetected: prev.anomaliesDetected
                }));
              }, 1000);
            }

            return () => {
              if (intervalRef.current) clearInterval(intervalRef.current);
            };
          }, [isStreaming]);

          const toggleStreaming = () => {
            setIsStreaming(!isStreaming);
          };

          const currentStock = stocks[selectedStock];
          const chartData = currentStock.history;

          return (
            <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6">
              <div className="max-w-7xl mx-auto">
                <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-white/20">
                  <div className="flex justify-between items-center flex-wrap gap-4">
                    <div>
                      <h1 className="text-3xl font-bold text-white mb-2 flex items-center gap-3">
                        <Activity className="text-purple-400" size={32} />
                        Real-Time Stock Analytics Platform
                      </h1>
                      <p className="text-purple-200">Data Engineering Showcase by Nikhil Ambore</p>
                    </div>
                    <div className="flex items-center gap-3">
                      <a href="https://github.com/nikhilambore" target="_blank" rel="noopener noreferrer" 
                         className="p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all">
                        <Github className="text-white" size={24} />
                      </a>
                      <a href="https://www.linkedin.com/in/nikhil-ambore-299189262" target="_blank" rel="noopener noreferrer"
                         className="p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-all">
                        <Linkedin className="text-white" size={24} />
                      </a>
                      <button
                        onClick={toggleStreaming}
                        className={`flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ${
                          isStreaming
                            ? 'bg-red-500 hover:bg-red-600 text-white'
                            : 'bg-green-500 hover:bg-green-600 text-white'
                        }`}
                      >
                        {isStreaming ? <Pause size={20} /> : <Play size={20} />}
                        {isStreaming ? 'Stop Stream' : 'Start Stream'}
                      </button>
                    </div>
                  </div>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                  <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white">
                    <div className="flex items-center justify-between mb-2">
                      <span className="text-blue-100">Events Processed</span>
                      <BarChart3 size={24} className="text-blue-100" />
                    </div>
                    <div className="text-3xl font-bold">{metrics.processedEvents.toLocaleString()}</div>
                    <div className="text-sm text-blue-100 mt-1">Real-time ingestion</div>
                  </div>

                  <div className="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white">
                    <div className="flex items-center justify-between mb-2">
                      <span className="text-green-100">Total Volume</span>
                      <DollarSign size={24} className="text-green-100" />
                    </div>
                    <div className="text-3xl font-bold">${(metrics.totalVolume / 1000000).toFixed(2)}M</div>
                    <div className="text-sm text-green-100 mt-1">Trading volume</div>
                  </div>

                  <div className="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white">
                    <div className="flex items-center justify-between mb-2">
                      <span className="text-purple-100">Avg Latency</span>
                      <Activity size={24} className="text-purple-100" />
                    </div>
                    <div className="text-3xl font-bold">{metrics.avgLatency}ms</div>
                    <div className="text-sm text-purple-100 mt-1">Sub-second processing</div>
                  </div>

                  <div className="bg-gradient-to-br from-orange-500 to-red-600 rounded-xl p-6 text-white">
                    <div className="flex items-center justify-between mb-2">
                      <span className="text-orange-100">Anomalies</span>
                      <AlertCircle size={24} className="text-orange-100" />
                    </div>
                    <div className="text-3xl font-bold">{metrics.anomaliesDetected}</div>
                    <div className="text-sm text-orange-100 mt-1">Detected in real-time</div>
                  </div>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                    <h2 className="text-xl font-bold text-white mb-4">Live Stock Prices</h2>
                    <div className="space-y-3">
                      {Object.entries(stocks).map(([symbol, data]) => (
                        <div
                          key={symbol}
                          onClick={() => setSelectedStock(symbol)}
                          className={`p-4 rounded-lg cursor-pointer transition-all ${
                            selectedStock === symbol
                              ? 'bg-purple-500/30 border-2 border-purple-400'
                              : 'bg-white/5 hover:bg-white/10 border-2 border-transparent'
                          }`}
                        >
                          <div className="flex justify-between items-start">
                            <div>
                              <div className="font-bold text-white text-lg">{symbol}</div>
                              <div className="text-sm text-purple-200">{data.name}</div>
                            </div>
                            <div className="text-right">
                              <div className="font-bold text-white text-lg">${data.price}</div>
                              <div className={`flex items-center gap-1 text-sm ${
                                data.change >= 0 ? 'text-green-400' : 'text-red-400'
                              }`}>
                                {data.change >= 0 ? <TrendingUp size={16} /> : <TrendingDown size={16} />}
                                {data.change >= 0 ? '+' : ''}{data.change}
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>

                    <div className="mt-6 pt-6 border-t border-white/20">
                      <h3 className="text-sm font-semibold text-purple-300 mb-3">Tech Stack</h3>
                      <div className="flex flex-wrap gap-2">
                        {['React', 'Kafka Pattern', 'Stream Processing', 'Anomaly Detection', 'Real-Time Analytics'].map(tech => (
                          <span key={tech} className="px-3 py-1 bg-purple-500/20 text-purple-200 rounded-full text-xs">
                            {tech}
                          </span>
                        ))}
                      </div>
                    </div>
                  </div>

                  <div className="lg:col-span-2 space-y-6">
                    <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                      <div className="flex justify-between items-center mb-4">
                        <h2 className="text-xl font-bold text-white">
                          {selectedStock} - Real-Time Price Stream
                        </h2>
                        <div className="flex items-center gap-2">
                          <div className={`w-3 h-3 rounded-full ${isStreaming ? 'bg-green-400 animate-pulse' : 'bg-gray-400'}`}></div>
                          <span className="text-purple-200 text-sm">{isStreaming ? 'Live' : 'Paused'}</span>
                        </div>
                      </div>
                      
                      {chartData.length > 0 ? (
                        <ResponsiveContainer width="100%" height={300}>
                          <AreaChart data={chartData}>
                            <defs>
                              <linearGradient id="colorPrice" x1="0" y1="0" x2="0" y2="1">
                                <stop offset="5%" stopColor="#8b5cf6" stopOpacity={0.8}/>
                                <stop offset="95%" stopColor="#8b5cf6" stopOpacity={0}/>
                              </linearGradient>
                            </defs>
                            <CartesianGrid strokeDasharray="3 3" stroke="#ffffff20" />
                            <XAxis dataKey="time" stroke="#e9d5ff" />
                            <YAxis domain={['auto', 'auto']} stroke="#e9d5ff" />
                            <Tooltip 
                              contentStyle={{ backgroundColor: '#1e1b4b', border: '1px solid #8b5cf6', borderRadius: '8px' }}
                              labelStyle={{ color: '#e9d5ff' }}
                            />
                            <Area type="monotone" dataKey="price" stroke="#8b5cf6" fillOpacity={1} fill="url(#colorPrice)" />
                          </AreaChart>
                        </ResponsiveContainer>
                      ) : (
                        <div className="h-[300px] flex items-center justify-center text-purple-300">
                          Click "Start Stream" to begin real-time data processing
                        </div>
                      )}
                    </div>

                    <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                      <h2 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                        <AlertCircle className="text-orange-400" size={24} />
                        Anomaly Detection Alerts
                      </h2>
                      <div className="space-y-2 max-h-48 overflow-y-auto">
                        {alerts.length === 0 ? (
                          <div className="text-center py-8 text-purple-300">
                            No anomalies detected yet. Start streaming to see alerts.
                          </div>
                        ) : (
                          alerts.map(alert => (
                            <div key={alert.id} className={`p-3 rounded-lg border-l-4 ${
                              alert.type === 'spike' 
                                ? 'bg-green-500/10 border-green-400' 
                                : 'bg-red-500/10 border-red-400'
                            }`}>
                              <div className="flex justify-between items-center">
                                <div>
                                  <span className="font-bold text-white">{alert.symbol}</span>
                                  <span className="text-purple-200 ml-2">
                                    {alert.type === 'spike' ? 'ðŸš€ Price Spike' : 'ðŸ“‰ Price Drop'}
                                  </span>
                                </div>
                                <div className="text-right">
                                  <div className={`font-bold ${
                                    alert.type === 'spike' ? 'text-green-400' : 'text-red-400'
                                  }`}>
                                    {alert.change > 0 ? '+' : ''}{alert.change}%
                                  </div>
                                  <div className="text-xs text-purple-300">{alert.time}</div>
                                </div>
                              </div>
                            </div>
                          ))
                        )}
                      </div>
                    </div>
                  </div>
                </div>

                <div className="mt-6 bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                  <h3 className="text-xl font-bold text-white mb-4">Project Highlights</h3>
                  <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-purple-200 mb-4">
                    <div>
                      <h4 className="font-semibold text-white mb-2">ðŸš€ Real-Time Processing</h4>
                      <p className="text-sm">Simulates Kafka streaming with sub-second latency, processing thousands of events per second</p>
                    </div>
                    <div>
                      <h4 className="font-semibold text-white mb-2">ðŸŽ¯ Anomaly Detection</h4>
                      <p className="text-sm">Statistical analysis detecting price movements >1.5%, similar to production fraud detection systems</p>
                    </div>
                    <div>
                      <h4 className="font-semibold text-white mb-2">ðŸ“Š Live Visualization</h4>
                      <p className="text-sm">Interactive dashboards showing real-time metrics, alerting, and historical trends</p>
                    </div>
                  </div>
                  <div className="pt-4 border-t border-white/20">
                    <div className="flex flex-col md:flex-row justify-between items-center gap-4">
                      <div className="text-purple-200 text-sm text-center md:text-left">
                        <p>Built by <span className="font-bold text-white">Nikhil Ambore</span> - Python Data Engineer</p>
                        <p className="text-purple-300 mt-1">Demonstrating: Stream Processing â€¢ Real-Time Analytics â€¢ Anomaly Detection</p>
                      </div>
                      <div className="flex items-center gap-3">
                        <a href="mailto:nikhil.ambore@aogjob.com" 
                           className="flex items-center gap-2 px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-all">
                          <Mail size={18} />
                          <span className="text-sm">Contact Me</span>
                        </a>
                        <a href="https://www.linkedin.com/in/nikhil-ambore-299189262" target="_blank" rel="noopener noreferrer"
                           className="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all">
                          <Linkedin size={18} />
                          <span className="text-sm">LinkedIn</span>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          );
        };

        ReactDOM.render(<RealTimeStockDashboard />, document.getElementById('root'));
    </script>
</body>
</html>